<div class="container">
  <div class="row text-center">
    <div class="col-12 m-2">
      <h2>Login</h2>
    </div>
  </div>
  <form [formGroup]="loginForm" (ngSubmit)="login()">
    <!-- Username -->
    <div class="row">
      <div class="col-12">
        <mat-form-field class="w-100 mt-2">
          <mat-label>Enter your username</mat-label>
          <input
            matInput
            [formControl]="username"
            (blur)="updateErrorMessage(username, usernameErrorMessage)"
            required
          />
          @if (showUsernameError) {
          <mat-error>{{usernameErrorMessage()}}</mat-error>
          }
        </mat-form-field>
      </div>
    </div>
    <!-- Password -->
    <div class="row">
      <div class="col-12">
        <mat-form-field class="w-100 mt-2">
          <mat-label>Enter your password</mat-label>
          <input
            matInput
            type="password"
            [formControl]="password"
            (blur)="updateErrorMessage(password, passwordErrorMessage)"
            required
          />
          @if (showPasswordError) {
          <mat-error>{{passwordErrorMessage()}}</mat-error>
          }
        </mat-form-field>
      </div>
    </div>
    <!-- Button -->
    <div class="row">
      <div class="col-12">
        @if (errorMessage()) {
        <mat-error class="text-start">{{errorMessage()}}</mat-error>
        }
        <button
          [disabled]="isLoggingIn"
          matButton="outlined"
          type="submit"
          class="w-100 mt-2"
        >
          @if (isLoggingIn) {
          <mat-spinner diameter="20" />
          } @else { Login }
        </button>
      </div>
    </div>
  </form>
</div>
